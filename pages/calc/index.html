<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="css/style.css">
	<title></title>
</head>
<body>
    <form id="birthday" class="form">
        <div class="c-input">
            <input type="date" class="input"></input>
        </div>
        <div class="result">
            <div class="row">
                <span id="n12" class="number"></span>
                <span class="number transparent"></span>
            </div>
            <div class="row">
                <span id="n10" class="number"></span>
                <span id="n11" class="number"></span>
                <span class="number transparent"></span>
            </div>
            <div class="row">
                <span id="n1" class="number"></span>
                <span id="n2" class="number"></span>
                <span id="n4" class="number"></span>
                <span id="n7" class="number"></span>
            </div>
            <div class="row">
                <span id="n3" class="number"></span>
                <span id="n5" class="number"></span>
                <span id="n8" class="number"></span>
            </div>
            <div class="row">
                <span id="n6" class="number"></span>
                <span id="n9" class="number"></span>
            </div>
        </div>
    </form>
    <p id="date_input_value"></p>
    <script>
        window.addEventListener("DOMContentLoaded", (event) => {
            const formBirthday = document.querySelector('#birthday');
            const inputDateBirthday = formBirthday.querySelector('input[type="date"]');
            const date_input_value = document.querySelector('#date_input_value');
            const n1 = document.querySelector('#n1');
            const n2 = document.querySelector('#n2');
            const n3 = document.querySelector('#n3');
            const n4 = document.querySelector('#n4');
            const n5 = document.querySelector('#n5');
            const n6 = document.querySelector('#n6');
            const n7 = document.querySelector('#n7');
            const n8 = document.querySelector('#n8');
            const n9 = document.querySelector('#n9');
            const n10 = document.querySelector('#n10');
            const n11 = document.querySelector('#n11');
            const n12 = document.querySelector('#n12');
            function get_arkan(count) {
                const rounded = +count % 22;
                if (rounded === 0) {
                    return 22;
                }
                
                if (rounded < 0) {
                    return rounded + 22;
                }

                return rounded;
            }
            function sum_year(year) {
            return year.split('').reduce((acc, number) => +acc + +number, 0)
            }
            inputDateBirthday.addEventListener('input', (e) => {
                const date = e.target.value;
                let [year, month, day] = date.split('-');

                const pos1 = get_arkan(day);
                const pos2 = get_arkan(month);
                const pos3 = get_arkan(pos1 + pos2);
                const pos4 = get_arkan(sum_year(year));
                const pos5 = get_arkan(pos2 + pos4);
                const pos6 = get_arkan(pos3 + pos5);
                const pos7 = get_arkan(pos3 + pos4);
                const pos8 = get_arkan(pos2 + pos6);
                const pos9 = get_arkan(pos7 + pos8);
                const pos10 = get_arkan(pos1 - pos2);
                const pos11 = get_arkan(pos2 - pos4);
                const pos12 = get_arkan(pos10 - pos11);
                
n1.innerText = pos1;
n2.innerText = pos2;
n3.innerText = pos3;
n4.innerText = pos4;
n5.innerText = pos5;
n6.innerText = pos6;
n7.innerText = pos7;
n8.innerText = pos8;
n9.innerText = pos9;
n10.innerText = pos10;
n11.innerText = pos11;
n12.innerText = pos12;
               // date_input_value.innerText = year + '_' + month + '_' + day;
            });
            // console.log("DOM fully loaded and parsed");
        });
    </script>
</body>
</html>